---
title: "GitHub Actions CI/CD 파이프라인"
description: "GitHub Actions를 활용하여 자동화된 CI/CD 파이프라인을 구축하는 방법을 단계별로 설명합니다."
date: "2025-02-14"
category: "개발"
tags: ["GitHub Actions", "CI/CD", "DevOps"]
---

## CI/CD란?

CI/CD는 코드 변경 사항을 자동으로 빌드, 테스트, 배포하는 소프트웨어 개발 방법론입니다:

- **CI (Continuous Integration)**: 코드 통합 시 자동으로 빌드와 테스트 수행
- **CD (Continuous Deployment)**: 테스트를 통과한 코드를 자동으로 배포

## GitHub Actions 기본 구조

워크플로우 파일은 `.github/workflows/` 디렉토리에 위치합니다:

```yaml
# .github/workflows/ci.yml
name: CI

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Lint
        run: npm run lint

      - name: Build
        run: npm run build
```

## 핵심 개념

### Trigger (on)

워크플로우가 실행되는 조건을 정의합니다:

```yaml
on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]
  schedule:
    - cron: '0 9 * * 1'  # 매주 월요일 오전 9시
  workflow_dispatch:  # 수동 실행 허용
```

### Job과 Step

Job은 독립적인 실행 단위이고, Step은 Job 내의 순차적 작업입니다:

```yaml
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: npm test

  deploy:
    needs: test  # test job이 성공해야 실행
    runs-on: ubuntu-latest
    steps:
      - run: echo "배포 시작"
```

### 환경 변수와 시크릿

```yaml
jobs:
  deploy:
    runs-on: ubuntu-latest
    env:
      NODE_ENV: production
    steps:
      - name: Deploy
        env:
          API_KEY: ${{ secrets.API_KEY }}
        run: |
          echo "API 키를 사용하여 배포"
```

시크릿은 GitHub 저장소의 Settings > Secrets에서 관리합니다.

## 실전 예제: Next.js CI/CD

```yaml
name: Next.js CI/CD

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  quality:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'

      - run: npm ci

      - name: Type Check
        run: npx tsc --noEmit

      - name: Lint
        run: npm run lint

      - name: Build
        run: npm run build

  deploy:
    needs: quality
    if: github.ref == 'refs/heads/main'
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Deploy to Vercel
        uses: amondnet/vercel-action@v25
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
          vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}
          vercel-args: '--prod'
```

## 캐싱으로 속도 개선

의존성 캐싱으로 빌드 시간을 단축합니다:

```yaml
- uses: actions/setup-node@v4
  with:
    node-version: '20'
    cache: 'npm'  # npm 캐시 자동 관리
```

## 유용한 팁

- **매트릭스 전략**: 여러 Node.js 버전에서 동시 테스트

```yaml
strategy:
  matrix:
    node-version: [18, 20, 22]
```

- **조건부 실행**: 특정 조건에서만 step 실행

```yaml
- name: Deploy
  if: github.event_name == 'push' && github.ref == 'refs/heads/main'
```

- **아티팩트 저장**: 빌드 결과물 보관

```yaml
- uses: actions/upload-artifact@v4
  with:
    name: build-output
    path: .next/
```

## 마무리

GitHub Actions는 코드 저장소와 바로 통합되어 별도의 CI/CD 서비스 없이도 강력한 자동화 파이프라인을 구축할 수 있습니다. 무료 사용량이 넉넉하고, Marketplace에서 다양한 공개 액션을 활용할 수 있어 개인 프로젝트부터 팀 프로젝트까지 폭넓게 사용됩니다.
