---
title: 'D-Day 계산 엔진 설계 노트: DST 안전한 날짜 계산 규칙'
description: '카운트다운 앱의 핵심은 UI가 아니라 날짜 계산 정확도입니다. DST와 위젯 동기화를 고려한 D-Day 엔진 규칙을 정리합니다.'
date: '2026-02-27'
category: 개발
tags:
  - Flutter
  - Dday
  - 날짜계산
  - 모바일앱
---
D-Day 앱에서 가장 위험한 버그는 하루 오차입니다.  
화면은 멀쩡해 보여도 날짜 계산이 틀리면 서비스 신뢰가 빠르게 무너집니다.

## 1) Duration 단순 차이는 경계일에서 틀릴 수 있다

DST(서머타임)나 타임존 경계일에서는 단순 밀리초 차이 계산이 오차를 만들 수 있습니다.  
안전한 방식은 날짜 컴포넌트(년/월/일)를 분리해 차이를 계산하는 방식입니다.

## 2) 기본 표기 규칙을 먼저 고정한다

D-Day는 표기 정책이 먼저 결정돼야 합니다.

- 당일 표시: D-DAY
- 과거 이벤트: D+N
- 미래 이벤트: D-N

표기 정책이 바뀌면 위젯/알림/목록 정렬이 함께 흔들리기 때문에 초기에 고정하는 편이 좋습니다.

## 3) 위젯 동기화는 “자정 기준 갱신”이 안정적이다

모바일 위젯은 갱신 빈도 제약이 있어 실시간 갱신을 강제하기 어렵습니다.  
그래서 자정 기준 타임라인 갱신 전략이 오차와 배터리 비용 사이 균형이 좋습니다.

## 4) 알림 설계는 이벤트 수 상한을 먼저 계산한다

D-7/D-3/D-1/D-0 같은 알림 정책은 플랫폼 제한과 함께 설계해야 합니다.  
이벤트가 많아지면 우선순위 정책이 필요하며, 그렇지 않으면 중요한 일정이 밀릴 수 있습니다.

## 체크리스트

- [ ] 날짜 계산이 컴포넌트 기반으로 구현돼 있는가
- [ ] D-DAY/D-N/D+N 표기 정책이 고정돼 있는가
- [ ] 위젯 갱신 시점이 문서화돼 있는가
- [ ] 알림 상한과 우선순위 규칙이 정의돼 있는가

## Joonit의 관점

카운트다운 앱의 핵심은 예쁜 카드보다 **경계일 정확도**라고 생각합니다.  
저는 기능 추가 전 날짜 계산 테스트부터 먼저 통과시키는 방식을 선호합니다.
