---
title: "LaunchAgent 변경 배포 패턴: Report-Only로 먼저 굴리는 이유"
description: "자동화 스케줄을 바꿀 때 바로 apply하면 사고가 납니다. report-only 선적용 패턴으로 안전하게 롤아웃하는 방법을 정리합니다."
date: "2026-02-18"
category: "개발"
tags: ["LaunchAgent", "macOS", "운영", "안전배포"]
---

자동화 스케줄 변경에서 가장 위험한 순간은 “변경 직후 정상처럼 보일 때”입니다.  
실제로는 로그가 충분히 쌓이기 전이라, 문제를 놓치기 쉽습니다.

실무에서는 `apply`를 바로 스케줄링하지 않고 **report-only 기간**을 먼저 둡니다.

## 1) 배포를 2단계로 분리한다

- 1단계: `--report-only` 스케줄 배포
- 2단계: 로그 안정화 후 `--apply` 전환

이 방식은 기능보다 운영 리스크를 먼저 줄입니다.

## 2) 전환 기준을 숫자로 고정한다

전환 기준이 모호하면 report-only가 영구화되거나, 반대로 너무 빨리 apply로 넘어갑니다.

- 7일 연속 치명 오류 0건
- 경고 노이즈 기준치 이하
- 실행 지연 시간 임계치 이내

## 3) kickstart로 즉시 검증한다

배포 후에는 기다리지 말고 강제 실행으로 확인합니다.

- LaunchAgent 재로드
- kickstart 강제 실행
- 로그 파일 최근 60줄 점검

즉시 검증을 넣으면 배포 당일에 대부분의 설정 오류를 잡을 수 있습니다.

## 4) 롤백 경로를 먼저 준비한다

안전 배포는 “문제 없게 만드는 것”보다 “문제 발생 시 빨리 되돌리는 것”이 핵심입니다.

- 이전 plist 백업
- 이전 실행 인자 기록
- 롤백 명령 템플릿 준비

## 근거: 자동화 장애는 코드보다 배포 타이밍에서 자주 발생한다

운영 로그를 보면 스크립트 자체보다 스케줄/인자 변경에서 사고가 많이 납니다.

- report-only 없이 apply로 전환하면 잘못된 삭제/정리가 발생합니다.
- 즉시 검증이 없으면 실패를 다음 스케줄까지 늦게 발견합니다.
- 롤백 경로가 없으면 복구 시간이 길어집니다.

## 실행 방법: LaunchAgent 안전 롤아웃 체크리스트

1. 변경 전 plist와 실행 인자를 백업한다.
2. report-only 모드로 먼저 배포한다.
3. kickstart로 즉시 1회 실행한다.
4. 7일 로그를 수집하고 임계치 충족 여부를 확인한다.
5. 조건 충족 시 apply로 전환하고, 첫 24시간은 집중 모니터링한다.

## 오늘의 메모

운영 자동화의 핵심은 기능 출시가 아니라  
“실수 없이 전환하는 절차”입니다.
