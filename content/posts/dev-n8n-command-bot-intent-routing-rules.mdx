---
title: 'n8n 커맨드 봇 인텐트 라우팅 규칙: 오작동을 줄이는 설계 기준'
description: '명령어 봇은 기능 추가보다 라우팅 규칙이 먼저입니다. 자연어 입력에서도 안정적으로 동작하도록 인텐트 분기 기준을 정리합니다.'
date: '2026-02-27'
category: 개발
tags:
  - n8n
  - TelegramBot
  - 인텐트분류
  - 자동화
---
명령어 봇은 기능이 늘수록 오작동 확률도 같이 올라갑니다.  
원인은 대부분 모델 성능이 아니라 **인텐트 라우팅 경계가 애매한 설계**입니다.

## 1) 의도 분기는 “명령형/조회형/대화형”으로 먼저 나눈다

초기에는 세 갈래 분기만 있어도 안정성이 크게 올라갑니다.

- 명령형: 상태를 바꾸는 요청
- 조회형: 상태를 읽는 요청
- 대화형: 일반 질문/잡담

이 분류가 없으면 안전하지 않은 명령이 대화 흐름에서 실행될 수 있습니다.

## 2) 실패 시 기본 경로(Fallback)를 명확히 둔다

실패 경로가 없으면 사용자 경험이 바로 끊깁니다.  
라우팅 실패 시에는 아래 정보를 반환하는 기본 응답이 필요합니다.

- 인식된 의도
- 실행되지 않은 이유
- 다시 입력할 수 있는 예시

## 3) 도구 설명은 기술 설명보다 “트리거 문장” 중심

툴 설명에 기술적 디테일만 쓰면 분류 품질이 떨어집니다.  
실제 입력 문장을 중심으로 도구 설명을 작성해야 인텐트 매핑 정확도가 올라갑니다.

## 4) 병렬 기능은 충돌 우선순위를 먼저 정한다

같은 문장이 여러 툴 조건에 걸리는 경우가 자주 생깁니다.  
우선순위 테이블을 두고 충돌 시 실행 순서를 고정해야 회귀를 막을 수 있습니다.

## 5) 운영 지표는 정답률보다 재시도율

실전에서는 라벨 정답률보다 사용자 재시도 패턴이 더 솔직한 지표입니다.

- 1회 입력 성공률
- Fallback 전환률
- 동일 요청 재입력률

이 수치로 분기 규칙을 지속 보정하는 것이 효과적입니다.

## 체크리스트

- [ ] 인텐트를 명령형/조회형/대화형으로 분리했는가
- [ ] 실패 시 기본 응답 경로가 있는가
- [ ] 도구 설명에 트리거 문장이 포함되는가
- [ ] 충돌 우선순위 규칙을 문서화했는가

## Joonit의 관점

봇 운영은 AI 성능보다 **경계 조건 설계**가 품질을 좌우한다고 봅니다.  
저는 새 기능을 붙일 때 항상 실패 경로를 먼저 구현합니다.
