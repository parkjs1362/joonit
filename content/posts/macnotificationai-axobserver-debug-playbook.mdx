---
title: 'AXObserver 기반 macOS 알림 캡처 디버그 플레이북'
description: 'macOS 알림 캡처 앱은 권한과 런타임 설정에서 대부분의 문제가 발생합니다. AXObserver 중심 디버그 순서를 정리합니다.'
date: '2026-02-27'
category: 개발
tags:
  - macOS
  - Swift
  - AXObserver
  - 디버깅
---
macOS 알림 캡처 앱은 코드 품질이 좋아도 권한/런타임 설정이 어긋나면 바로 실패합니다.  
특히 AXObserver 기반 앱은 일반 앱과 디버그 순서를 다르게 잡아야 합니다.

## 1) 권한 문제를 가장 먼저 분리한다

알림 캡처 실패를 로직 버그로 보기 전에 접근성 권한 상태를 먼저 확인해야 합니다.  
권한 상태와 실제 캡처 파이프라인을 분리해서 점검하면 원인 범위가 빠르게 줄어듭니다.

- 권한 요청 키 설정 확인
- 권한 상태 변화 이벤트 확인
- 권한 허용 후 캡처 시작 시점 확인

## 2) 샌드박스/런타임 조건을 명확히 한다

AXObserver를 쓰는 앱은 보안 설정과 충돌하기 쉽습니다.  
필요한 설정을 문서로 고정하고, 빌드 설정이 바뀌면 먼저 이 부분을 확인해야 합니다.

## 3) 실패 상태를 성공으로 기록하지 않는다

알림 라우팅에서 흔한 오류는 실패를 성공으로 기록하는 것입니다.  
저장소 상태값이 정확하지 않으면 나중에 원인을 되짚을 수 없습니다.

성공/실패 기록의 신뢰성을 먼저 확보해야 운영 지표가 의미를 갖습니다.

## 4) 라우팅 테스트는 서비스별로 분리한다

Calendar, Reminders, Notes, 메시지 전송을 한 번에 테스트하면 실패 위치를 찾기 어렵습니다.  
서비스별 독립 테스트 버튼을 두고 각각 통과시킨 뒤 통합 테스트를 진행하는 방식이 안정적입니다.

## 체크리스트

- [ ] 권한 키와 권한 상태 전이가 검증됐는가
- [ ] 캡처 실패가 DB에 실패로 정확히 기록되는가
- [ ] 서비스별 라우팅 테스트 경로가 분리돼 있는가
- [ ] 통합 테스트 전에 단위 경로를 각각 통과했는가

## Joonit의 관점

이런 앱은 기능을 빨리 붙이는 것보다 **실패를 정확히 보이게 만드는 것**이 먼저라고 봅니다.  
저는 새 라우팅을 추가할 때 성공 케이스보다 실패 기록부터 먼저 확인합니다.
