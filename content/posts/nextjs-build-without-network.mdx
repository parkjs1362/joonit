---
title: "네트워크 막힌 환경에서 Next.js 빌드가 실패할 때: 폰트와 번들러 체크리스트"
description: "사내망/CI에서 next/font가 Google Fonts를 못 받아와 빌드가 깨질 때가 있습니다. 원인부터 우회 전략까지 짧게 정리합니다."
date: "2026-02-10"
category: "개발"
tags: ["Next.js", "Build", "CI", "Fonts"]
---

빌드가 잘 되던 프로젝트가 어느 날 갑자기 깨질 때가 있습니다. 특히 회사 네트워크, 폐쇄망, 제한된 CI 환경에서요.

증상은 대략 이런 형태로 나옵니다.

```text
next/font: error: Failed to fetch from Google Fonts
또는 Turbopack build failed ...
```

이럴 때 중요한 건 “코드가 틀렸다”가 아니라, **빌드 과정이 외부 리소스에 의존하고 있었는지**를 먼저 확인하는 겁니다.

## 1) 가장 흔한 원인: next/font/google

`next/font/google`는 빌드 시점에 폰트 CSS/파일을 가져오는 과정이 포함됩니다. 외부 접속이 막혀 있으면 그대로 실패합니다.

해결은 2가지 중 하나로 갑니다.

- **원칙**: 폰트를 **로컬로 호스팅**하거나(파일 포함) 조직 정책에 맞게 프록시/미러를 둡니다.
- **현실적인 우회**: 당장 배포가 급하면 폰트를 **시스템 폰트 스택으로 대체**합니다.

### 빠른 우회: 시스템 폰트 스택으로 “일단 성공”시키기

폰트가 바뀌면 디자인이 조금 달라질 수 있지만, 글 콘텐츠 중심의 사이트라면 시스템 폰트도 충분히 깔끔합니다.

```css
:root {
  --font-sans-stack: "Pretendard", ui-sans-serif, system-ui, -apple-system, "Segoe UI",
    "Apple SD Gothic Neo", "Malgun Gothic", sans-serif;
}

body {
  font-family: var(--font-sans-stack);
}
```

“예쁘게”는 나중에 다시 잡을 수 있지만, “배포가 멈추는 것”은 먼저 풀어야 합니다.

### 원칙적인 해결: 로컬 폰트(자체 호스팅)로 바꾸기

장기적으로는 폰트 파일을 레포/스토리지에 포함시키고 로컬 로딩으로 전환하는 게 안전합니다.

- 외부 네트워크 정책에 영향이 줄고
- 빌드가 재현 가능해지고
- 장애 포인트가 하나 줄어듭니다

## 2) 번들러 선택도 문제를 단순하게 만든다

실제 장애 상황에서는 “실험적 기능”이 원인일 때가 많습니다. 이럴 때는 빌드를 안정적인 모드로 고정해두면 디버깅이 쉬워집니다.

예를 들어 webpack 빌드로 고정:

```json
{
  "scripts": {
    "build": "next build --webpack"
  }
}
```

## 3) 빠른 체크리스트

아래 순서대로 보면 대부분 해결됩니다.

- `next/font/google`를 쓰고 있는가?
- 빌드 로그에 “Failed to fetch … fonts.googleapis.com” 같은 메시지가 있는가?
- CI 환경에서 외부 네트워크 정책(egress)이 막혀 있는가?
- 폰트를 “예쁘게”보다 “안 깨지게” 먼저 바꿔도 되는가?

## 4) 재발 방지(진짜 중요한 부분)

한 번 겪고 나면 “왜 그때 터졌지?”보다 “다음엔 안 터지게”가 더 중요합니다.

- **빌드가 외부에 의존하지 않게**(폰트/이미지/스크립트)
- CI에서 `npm run build`를 반드시 돌리기(로컬 성공이 CI 성공을 보장하진 않습니다)
- “실험적 번들러/기능”은 문제 생길 때 바로 꺼볼 수 있게 플래그로 관리하기

## 결론

이 문제는 디자인 문제가 아니라 **의존성 문제**입니다.

한 번만 정리해 두면 다음부터는 선택지가 단순해집니다:

- 폰트는 로컬/자체 호스팅
- 빌드는 안정 모드로 고정(필요 시)

“어제까지 되던 게 오늘 안 된다”는 대부분, 코드가 아니라 **환경이 바뀐 것**부터 의심하면 빨리 끝납니다.
