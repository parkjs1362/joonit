---
title: '배포 사고를 줄이는 롤백 플레이북: 기능 플래그 중심 운영'
description: '배포 실패는 기술보다 절차 문제로 커집니다. 기능 플래그와 단계 롤아웃을 기준으로 롤백 플레이북을 정리합니다.'
date: '2026-02-26'
category: 개발
tags:
  - 배포
  - 롤백
  - 기능플래그
  - 운영
---
배포가 실패하는 순간 팀이 흔들리는 이유는 코드 자체보다 **되돌리는 절차가 불명확하기 때문**입니다.  
그래서 배포 전 준비보다 중요한 것은 “문제 발생 시 10분 안에 어떤 순서로 되돌릴지”를 고정해 두는 일입니다.

## 롤백이 늦어지는 핵심 원인

실패를 복잡하게 만드는 패턴은 거의 같습니다.

- 장애 기준이 모호해 의사결정이 늦음
- 코드 롤백과 데이터 롤백이 분리되어 있지 않음
- 담당자 호출 경로가 문서에만 있고 실제로 안 씀
- 사용자 공지 문구가 준비돼 있지 않음

즉, 기술 스택이 아니라 **운영 합의의 부재**가 원인입니다.

## 기능 플래그를 기본선으로 둬야 하는 이유

기능 플래그는 배포를 “전부 켜기/끄기”가 아닌 **점진적 노출**로 바꿉니다.

- 코드 배포와 기능 공개 시점을 분리
- 문제 발생 시 코드 롤백 없이 기능 비활성화 가능
- 사용자군별 영향 범위 제한

특히 소규모 팀에서 플래그는 빠른 의사결정을 위한 안전장치 역할을 합니다.

## 10분 롤백 프로토콜

### 1) 장애 레벨 판단 (2분)

사전에 정의된 기준으로 레벨을 고정합니다.

- L1: 핵심 흐름 불가(로그인/결제/작성 실패)
- L2: 성능 저하 또는 일부 기능 오류
- L3: UI 오류/비핵심 경고

### 2) 기능 플래그 우선 차단 (2분)

새 기능이 원인 후보면 코드 롤백 전에 플래그를 끕니다.  
사용자 영향 확산을 먼저 멈춰야 이후 분석 시간이 생깁니다.

### 3) 코드 롤백 여부 결정 (3분)

플래그 차단으로 안정화되지 않으면 이전 안정 릴리스로 즉시 롤백합니다.  
이때 “어느 커밋으로 복귀할지”는 릴리스 노트에 미리 적어둬야 합니다.

### 4) 공지/기록/재발방지 (3분)

복구 후 바로 남겨야 할 최소 기록:

- 장애 시작/복구 시각
- 원인 후보
- 임시 조치
- 후속 액션 Owner + Due

## 단계 롤아웃 기본값

처음부터 100% 배포하지 않습니다.

- 5% (기술 확인)
- 25% (실사용 확인)
- 100% (안정 확인)

각 단계에서 오류율/응답시간/이탈 지표를 확인하고 넘어갑니다.

## 플레이북 문서에 꼭 있어야 할 항목

- 플래그 목록과 책임자
- 최근 안정 버전 커밋
- 롤백 명령어/절차
- 공지 템플릿
- 사후 회고 템플릿

문서가 길어지면 실제 상황에서 안 읽습니다. 한 화면에 들어가게 유지하는 편이 좋습니다.

## 체크리스트

- [ ] 장애 레벨 기준이 숫자/상태로 정의돼 있는가
- [ ] 기능 플래그 차단 절차가 2분 내 실행 가능한가
- [ ] 최근 안정 커밋이 릴리스 노트에 기록돼 있는가
- [ ] 복구 후 사후 기록 항목이 고정돼 있는가

## Joonit의 관점

배포 품질은 “문제가 안 생기는가”보다 “문제가 생겼을 때 얼마나 빨리 줄일 수 있는가”로 평가해야 한다고 봅니다.  
저는 새 기능을 배포할 때 항상 완성도보다 롤백 속도를 먼저 확인합니다.
